<h1>Mensajes</h1>

<h5><strong>Perfil activo:</strong> <%= Profile.current_profile.profile_name %></h5>

<div class="table-responsive">
  <table class="table table-hover table-bordered">
    <thead>
      <tr class="text-center">
        <th class="col-1">ID</th>
        <th class="col-3">Remitente</th>
        <th class="col">Asunto</th>
        <th class="col-1">Estado</th>
        <th class="col-1">Perfil</th>
        <th class="col-2">Acciones</th>
      </tr>
    </thead>
    <tbody>
      <% @messages.each do |message| %>
        <% status_bagde = message.message_status == 'readed' ? 'secondary' : 'success' %>
        <tr class="text-center align-middle">
          <td><%= message.id %></td>
          <td><%= message.message_email %></td>
          <td><%= message.message_subject %></td>
          <td><span class="badge text-bg-<%= status_bagde %>"><%= message.message_status_humanized %></span></td>
          <td><%= message.profile.profile_name %></td>
          <td>
            <%= link_to('Leer', administration_message_path(message), class: 'btn btn-primary mb-md-0 mb-2') %>
            <%= link_to('Eliminar', administration_message_path(message), class: 'btn btn-danger mb-md-0', data: { turbo_method: :delete, turbo_confirm: 'Â¿Realmente desea eliminar este mensaje?' }) %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
